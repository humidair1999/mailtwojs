/*

Mailtwo.js - A better way to handle 'mailto:' links across your site

J. Ky Marsh, jkymarsh@gmail.com
Copyright (c) 2012

*/(function(e,t,n,r){var i="mailtwo",s={modalBgClass:"mailtwoBackground",modalClass:"mailtwoModal"},o=function(t,n){this.element=t;this.defaults=s;this.name=i;this.options=e.extend({},s,n);this.init()};o.prototype.repeatHeader=function(t,n,r){var i,s="<td>",o=s.replace("<","</"),u,a=[];if(!n.terminateTable){i=n.headerClass?'<tr class="'+n.headerClass+'">':"<tr>";for(var f=0;f<r.length;f++){if(n.preserveStyle){u='colspan="'+r[f].colSpan+'" '+'style="'+"font-size:"+r[f].fontSize+";"+"font-weight:"+r[f].fontWeight+";"+"font-style:"+r[f].fontStyle+";"+"color:"+r[f].fontColor+";"+'"';u=s.replace(">"," "+u+">")}else u=s;i+=u;i+=r[f].content;i+=o}i+="</tr>";t.find("tr").each(function(t){t%n.period===0&&t!==0&&e(this).after(i)})}else{t.find("tr").each(function(e){a.push(n.period*e);e%n.period===0&&e!==0&&t.after(t.clone())});t.parent().find("table").each(function(){e(this).find("tr").each(function(t){(t<=a[0]||t>a[0]+n.period)&&t!==0&&e(this).remove()});a.shift();e(this).find("tr").each(function(){e(this).siblings().length===0&&e(this).parents("table").remove()})})}};o.prototype.fixHeader=function(n,r,i){var s=n.clone(),o=n.offset().left,u=n.outerWidth(),a=[];s.find("tr").each(function(t){t!==0?e(this).remove():e(this).find("th").each(function(t){e(this).css("width",i[t].width)})});r.headerClass&&s.addClass(r.headerClass);s.css("position","fixed").css("top",0).css("left",o).css("width",u).css("margin",0).hide();n.parents("body").append(s);e(t).scroll(function(){s.offset().top>=n.offset().top&&s.offset().top<=n.offset().top+n.height()?s.fadeIn():s.fadeOut()})};o.prototype.constructModal=function(t){var n="."+t.modalBgClass;console.log(t);console.log(n);var r=function(){var n=e("<div />"),r="";r+='<a href="#" id="closeMailtwoModal">X</a><ul><li><span>Send me an email:</span><a href="'+t.emailFull+'" target="_blank">lol</a>'+"</li>";t.facebook&&(r+='<li><a href="http://www.facebook.com/'+t.facebook+'" target="_blank">'+t.facebook+"</a>"+"</li>");t.twitter&&(r+='<li><a href="http://twitter.com/'+t.twitter+'" target="_blank">'+t.twitter+"</a>"+"</li>");t.linkedin&&(r+='<li><a href="http://www.linkedin.com/'+t.linkedin+'" target="_blank">'+t.linkedin+"</a>"+"</li>");n.addClass(t.modalClass).html(r);return n};e("body").children(n).length===0?e("<div />").addClass(t.modalBgClass).html(r()).appendTo("body"):e(n).html(r())};o.prototype.init=function(){var t=this,n=e(this.element),r=this.options;r.emailFull=n.attr("href");r.emailParsed=r.emailFull.split(":")[1];r.facebook=r.facebook||n.attr("data-facebook");r.twitter=r.twitter||n.attr("data-twitter");r.linkedin=r.linkedin||n.attr("data-linkedin");n.on("click",function(n){n.preventDefault();t.constructModal(r);e("."+r.modalBgClass).show()});e("#closeMailtwoModal").live("click",function(t){t.preventDefault();e("."+r.modalBgClass).hide()})};e.fn[i]=function(t){var n=function(){e.data(this,"plugin_"+i)||e.data(this,"plugin_"+i,new o(this,t))};return this.each(function(){e(this).attr("href")?n.call(this):e(this).find("a").each(function(){n.call(this)})})}})(jQuery,window,document);